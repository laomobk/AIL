

fun log(func) {
    fun wrapper(argv) {
        print 'call'; func
        return func(argv)
    }
    return wrapper
}

fun log2(msg) {
    fun log_msg(func) {
        fun wrapper(argv) {
            print 'msg ='; msg; ', call'; func
            return func(argv)
        }
        return wrapper
    }
    return log_msg
} 

@log2('Hello')
fun print_name(name) {
    print 'Hello'; name
}


struct Person {
    name
}

@log
fun (Person) say_hi(this) {
    print 'Hello, my name is'; this
}

if __is_main__ {
    print_name('Nezha')
    new(Person, ['Nezha']).say_hi()
}
